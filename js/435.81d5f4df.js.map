{"version":3,"file":"js/435.81d5f4df.js","mappings":"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","sources":["webpack://vue_week7/./src/views/CartView.vue","webpack://vue_week7/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <h2 class=\"text-center mt-5\">前台購物車</h2>\n  <VLoading :active=\"isLoading\"></VLoading>\n  <div class=\"container mt-5\">\n    <div class=\"row justify-content-center\">\n      <div class=\"text-end\">\n        <button\n          class=\"btn btn-outline-danger\"\n          type=\"button\"\n          @click=\"deleteCartAll\"\n          :disabled=\"cartData.carts.length === 0\"\n        >\n          清空購物車\n        </button>\n      </div>\n      <table class=\"table align-middle mt-3\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>品名</th>\n            <th style=\"width: 150px\">數量/單位</th>\n            <th class=\"text-end\">單價</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"cartData.carts\">\n            <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"removeCartItem(item.id)\"\n                  :disabled=\"isLoadingItem === item.id\"\n                >\n                  <div\n                    class=\"spinner-border spinner-border-sm\"\n                    v-if=\"isLoadingItem === item.id\"\n                  ></div>\n                  移除購物車\n                </button>\n              </td>\n              <td>\n                {{ item.product.title }}\n                <div class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</div>\n              </td>\n              <td>\n                <div class=\"input-group input-group-sm\">\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    min=\"1\"\n                    v-model.number=\"item.qty\"\n                    @blur=\"updateCartItem(item)\"\n                  />\n                  <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                </div>\n              </td>\n              <td class=\"text-end\">\n                <small\n                  v-if=\"cartData.final_total !== cartData.total\"\n                  class=\"text-success\"\n                  >折扣價：</small\n                >\n                {{ $filters.currency(item.final_total) }}\n              </td>\n            </tr>\n          </template>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"3\" class=\"text-end\">總計</td>\n            <td class=\"text-end\">{{ $filters.currency(cartData.total) }}</td>\n          </tr>\n          <tr v-if=\"cartData.final_total !== cartData.total\">\n            <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n            <td class=\"text-end text-success\">\n              {{ $filters.currency(cartData.final_total) }}\n            </td>\n          </tr>\n        </tfoot>\n      </table>\n\n      <div class=\"input-group mb-3 input-group-sm\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"coupon_code\"\n          placeholder=\"請輸入優惠碼\"\n        />\n        <div class=\"input-group-append\">\n          <button\n            class=\"btn btn-outline-secondary\"\n            type=\"button\"\n            @click=\"addCouponCode\"\n          >\n            套用優惠碼\n          </button>\n        </div>\n      </div>\n\n      <div class=\"my-5 row justify-content-center\">\n        <h3 class=\"text-center mt-5\">收件人資訊</h3>\n        <VForm\n          ref=\"form\"\n          class=\"col-md-6\"\n          v-slot=\"{ errors }\"\n          @submit=\"createOrder\"\n        >\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <VField\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></VField>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <VField\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></VField>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <VField\n              id=\"tel\"\n              name=\"電話\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"form.user.tel\"\n              required\n            ></VField>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <VField\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></VField>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              name=\"\"\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <button\n              type=\"submit\"\n              class=\"btn btn-danger\"\n              :disabled=\"\n                !cartData.carts.length || Object.keys(errors).length > 0\n              \"\n              @submit.prevent=\"createOrder\"\n            >\n              送出訂單\n            </button>\n          </div>\n        </VForm>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  inject: [\"emitter\"],\n  data() {\n    return {\n      isLoading: false,\n      cartData: {\n        carts: [],\n      },\n      product: {},\n      isLoadingItem: \"\",\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n      coupon_code: \"\",\n    };\n  },\n  methods: {\n    getCart() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.cartData = res.data.data;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.$httpMessageState(err.response, \"錯誤訊息\");\n        });\n    },\n    removeCartItem(id) {\n      this.isLoadingItem = id;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.isLoading = true;\n      this.$http\n        .delete(api)\n        .then((res) => {\n          this.$httpMessageState(res, \"移除購物車品項\");\n          this.isLoadingItem = \"\";\n          this.isLoading = false;\n          this.emitter.emit(\"cart-length\");\n          this.getCart();\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, \"移除購物車品項\");\n        });\n    },\n    deleteCartAll() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`;\n      this.$http\n        .delete(api)\n        .then((res) => {\n          this.$httpMessageState(res, \"清除購物車\");\n          this.isLoading = false;\n          this.emitter.emit(\"cart-length\");\n          this.getCart();\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.$httpMessageState(err.response, \"清除購物車\");\n        });\n    },\n    updateCartItem(item) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cartData = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      this.isLoadingItem = item.id;\n      this.$http\n        .put(api, { data: cartData })\n        .then((res) => {\n          this.$httpMessageState(res, \"更新購物車\");\n          this.isLoadingItem = \"\";\n          this.emitter.emit(\"cart-length\");\n          this.getCart();\n        })\n        .catch((err) => {\n          this.isLoadingItem = \"\";\n          this.$httpMessageState(err.response, \"更新購物車\");\n        });\n    },\n    addCouponCode() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http\n        .post(api, { data: coupon })\n        .then((res) => {\n          this.$httpMessageState(res, \"加入優惠券\");\n          this.isLoading = false;\n          this.getCart();\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.$httpMessageState(err.response, \"加入優惠券\");\n        });\n    },\n    createOrder() {\n      this.isLoading = true;\n      const order = this.form;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      this.$http\n        .post(api, { data: order })\n        .then((res) => {\n          this.$httpMessageState(res, \"建立訂單\");\n          this.$router.push(`/checkout/${res.data.orderId}`);\n          this.$refs.form.resetForm();\n          this.isLoading = false;\n          this.getCart();\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.$httpMessageState(err.response, \"建立訂單\");\n        });\n    },\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : \"電話 須為正確的電話號碼\";\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=5369b4a0\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Downloads/Vue projects/vue_week7/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","colspan","for","_hoisted_1","_createVNode","_component_VLoading","active","$data","type","onClick","$options","disabled","carts","length","_hoisted_5","_hoisted_7","_createElementBlock","_Fragment","key","_renderList","item","id","product","title","coupon","min","qty","$event","onBlur","_toDisplayString","unit","final_total","total","_ctx","currency","_hoisted_17","_hoisted_19","_hoisted_20","placeholder","_hoisted_25","_component_VForm","ref","onSubmit","errors","_hoisted_27","_component_VField","name","rules","user","email","_component_ErrorMessage","_hoisted_29","_hoisted_31","tel","required","_hoisted_33","address","_hoisted_35","cols","rows","message","Object","keys","_hoisted_37","inject","data","isLoading","cartData","isLoadingItem","form","coupon_code","methods","getCart","this","api","$http","get","then","res","catch","err","$httpMessageState","response","removeCartItem","delete","emitter","emit","deleteCartAll","updateCartItem","product_id","put","addCouponCode","code","post","createOrder","order","$router","push","orderId","$refs","resetForm","isPhone","value","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}