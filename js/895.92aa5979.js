"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[895],{3895:function(t,i,e){e.r(i),e.d(i,{default:function(){return E}});var s=e(6252),o=e(3577),d=e(9963);const a={class:"container mt-5 mb-5"},l=(0,s._)("h2",{class:"text-center"},"產品列表頁面",-1),n={class:"table align-middle mt-5"},r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品名稱"),(0,s._)("th",null,"價格"),(0,s._)("th")])],-1),c={style:{width:"200px"}},u={key:0,class:"h5"},p={key:1,class:"h6"},h={key:2,class:"h5"},g={class:"btn-group btn-group-sm"},m=["onClick","disabled"],b={class:"spinner-border spinner-border-sm"},_=(0,s.Uk)(" 查看更多 "),v=["onClick","disabled"],w={class:"spinner-border spinner-border-sm"},k=(0,s.Uk)(" 加到購物車 ");function y(t,i,e,y,L,x){const f=(0,s.up)("VLoading"),M=(0,s.up)("UserProductModal");return(0,s.wg)(),(0,s.iD)("div",a,[l,(0,s.Wm)(f,{active:L.isLoading},null,8,["active"]),(0,s._)("table",n,[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",c,[(0,s._)("div",{style:(0,o.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,s._)("td",null,(0,o.zw)(t.title),1),(0,s._)("td",null,[t.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",u,(0,o.zw)(t.origin_price)+" 元 ",1)),t.price?((0,s.wg)(),(0,s.iD)("del",p,"原價 "+(0,o.zw)(t.origin_price)+" 元",1)):(0,s.kq)("",!0),t.price?((0,s.wg)(),(0,s.iD)("div",h," 現在只要 "+(0,o.zw)(t.price)+" 元 ",1)):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("div",g,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:i=>x.getProduct(t.id),disabled:L.isLoadingItem===t.id||!t.is_enabled},[(0,s.wy)((0,s._)("div",b,null,512),[[d.F8,L.isLoadingItem===t.id]]),_],8,m),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:i=>x.addToCart(t.id),disabled:L.isLoadingItem===t.id||!t.is_enabled},[(0,s.wy)((0,s._)("div",w,null,512),[[d.F8,L.isLoadingItem===t.id]]),k],8,v)])])])))),128))])]),(0,s.Wm)(M,{ref:"userProductModal",product:L.product,onAddToCart:x.addToCart},null,8,["product","onAddToCart"])])}const L={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},x={class:"modal-dialog modal-xl",role:"document"},f={class:"modal-content border-0"},M={class:"modal-header bg-dark text-white"},C={class:"modal-title",id:"exampleModalLabel"},$=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),z={class:"modal-body"},q={class:"row"},P={class:"col-sm-6"},D=["src"],I={class:"col-sm-6"},U={class:"badge bg-primary rounded-pill"},T={key:0,class:"h5"},S={key:1,class:"h6"},j={key:2,class:"h5"},V={class:"input-group"};function Z(t,i,e,a,l,n){return(0,s.wg)(),(0,s.iD)("div",L,[(0,s._)("div",x,[(0,s._)("div",f,[(0,s._)("div",M,[(0,s._)("h5",C,[(0,s._)("span",null,(0,o.zw)(e.product.title),1)]),$]),(0,s._)("div",z,[(0,s._)("div",q,[(0,s._)("div",P,[(0,s._)("img",{class:"img-fluid",src:e.product.imageUrl,alt:""},null,8,D)]),(0,s._)("div",I,[(0,s._)("span",U,(0,o.zw)(e.product.category),1),(0,s._)("p",null,"商品描述："+(0,o.zw)(e.product.description),1),(0,s._)("p",null,"商品內容："+(0,o.zw)(e.product.content),1),e.product.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",T,(0,o.zw)(e.product.origin_price)+" 元 ",1)),e.product.price?((0,s.wg)(),(0,s.iD)("del",S,"原價 "+(0,o.zw)(e.product.origin_price)+" 元",1)):(0,s.kq)("",!0),e.product.price?((0,s.wg)(),(0,s.iD)("div",j," 現在只要 "+(0,o.zw)(e.product.price)+" 元 ",1)):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s._)("div",V,[(0,s.wy)((0,s._)("input",{type:"number",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=t=>l.qty=t),min:"1"},null,512),[[d.nr,l.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:i[1]||(i[1]=i=>t.$emit("add-to-cart",e.product.id,l.qty))}," 加入購物車 ")])])])])])])])],512)}var A=e(1339),F={props:["product"],data(){return{modal:{},qty:1}},watch:{id(){const{id:t}=this.$route.params;this.getProduct(t)}},mixins:[A.Z],inject:["emitter"]},W=e(3744);const H=(0,W.Z)(F,[["render",Z]]);var K=H,Y={name:"ProductsView",inject:["emitter"],data(){return{products:[],isLoadingItem:"",isLoading:!1,product:{}}},components:{UserProductModal:K},mounted(){this.getProducts()},methods:{addToCart(t,i=1){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/cart",s={product_id:t,qty:i};this.isLoadingItem=t,this.$refs.userProductModal.hideModal(),this.$http.post(e,{data:s}).then((t=>{this.$httpMessageState(t,"加入購物車"),this.isLoadingItem="",this.isLoading=!1,this.emitter.emit("cart-length")})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"加入購物車")}))},getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/products";this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"取得品項")}))},getProduct(t){this.isLoading=!0;const i=`https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/product/${t}`;this.isLoadingItem=t,this.$http.get(i).then((t=>{this.isLoadingItem="",this.product=t.data.product,this.isLoading=!1,this.$refs.userProductModal.openModal()})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"取得單一品項")}))}}};const B=(0,W.Z)(Y,[["render",y]]);var E=B}}]);
//# sourceMappingURL=895.92aa5979.js.map